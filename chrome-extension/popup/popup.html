<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Accute - Quick Add</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <img src="../icons/icon48.png" alt="Accute" width="24" height="24">
        <span class="logo-text">Accute</span>
      </div>
      <div class="header-actions">
        <button id="settings-btn" class="icon-btn" title="Settings">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Auth State: Not Logged In -->
    <div id="auth-view" class="view">
      <div class="auth-container">
        <h2>Welcome to Accute</h2>
        <p>AI-powered practice management for accounting firms</p>
        <button id="login-btn" class="btn btn-primary">
          Login to Accute
        </button>
        <p class="auth-help">
          Don't have an account? <a href="#" id="register-link">Start Free Trial</a>
        </p>
      </div>
    </div>

    <!-- Main View: Logged In -->
    <div id="main-view" class="view hidden">
      <!-- Quick Add Task Form -->
      <form id="task-form" class="task-form">
        <div class="form-group">
          <label for="task-title">Task Title</label>
          <input 
            type="text" 
            id="task-title" 
            placeholder="What needs to be done?"
            autofocus
          >
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="task-client">Client</label>
            <select id="task-client">
              <option value="">Select client...</option>
            </select>
          </div>
          <div class="form-group">
            <label for="task-priority">Priority</label>
            <select id="task-priority">
              <option value="low">Low</option>
              <option value="medium" selected>Medium</option>
              <option value="high">High</option>
              <option value="urgent">Urgent</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="task-due">Due Date</label>
          <input type="date" id="task-due">
        </div>

        <div class="form-group">
          <label for="task-notes">Notes</label>
          <textarea 
            id="task-notes" 
            placeholder="Add any notes or context..."
            rows="3"
          ></textarea>
        </div>

        <!-- Page Context -->
        <div class="page-context" id="page-context">
          <label>
            <input type="checkbox" id="attach-url" checked>
            Attach current page
          </label>
          <div class="page-info" id="page-info">
            <span class="page-title" id="page-title-display">Loading...</span>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" id="cancel-btn" class="btn btn-secondary">Cancel</button>
          <button type="submit" class="btn btn-primary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 5v14M5 12h14"/>
            </svg>
            Add Task
          </button>
        </div>
      </form>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <button id="time-tracker-btn" class="quick-action">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 6v6l4 2"/>
          </svg>
          Start Timer
        </button>
        <button id="capture-btn" class="quick-action">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2"/>
            <circle cx="8.5" cy="8.5" r="1.5"/>
            <path d="M21 15l-5-5L5 21"/>
          </svg>
          Capture Page
        </button>
        <button id="ai-btn" class="quick-action">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A1.5 1.5 0 0 0 6 14.5 1.5 1.5 0 0 0 7.5 16 1.5 1.5 0 0 0 9 14.5 1.5 1.5 0 0 0 7.5 13m9 0a1.5 1.5 0 0 0-1.5 1.5 1.5 1.5 0 0 0 1.5 1.5 1.5 1.5 0 0 0 1.5-1.5 1.5 1.5 0 0 0-1.5-1.5z"/>
          </svg>
          Ask AI
        </button>
      </div>

      <!-- User Info -->
      <div class="user-info">
        <span id="user-email"></span>
        <button id="logout-btn" class="text-btn">Logout</button>
      </div>
    </div>

    <!-- Settings View -->
    <div id="settings-view" class="view hidden">
      <div class="settings-header">
        <button id="back-btn" class="icon-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
        </button>
        <h3>Settings</h3>
      </div>
      <div class="settings-content">
        <div class="setting-item">
          <label for="api-url">Accute Server URL</label>
          <input type="url" id="api-url" placeholder="https://your-accute-instance.com">
        </div>
        <div class="setting-item">
          <label>
            <input type="checkbox" id="auto-attach-url" checked>
            Auto-attach current page URL to tasks
          </label>
        </div>
        <div class="setting-item">
          <label>
            <input type="checkbox" id="keyboard-shortcuts" checked>
            Enable keyboard shortcuts
          </label>
        </div>
        <button id="save-settings-btn" class="btn btn-primary">Save Settings</button>
      </div>
    </div>

    <!-- Status Messages -->
    <div id="status-message" class="status-message hidden"></div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
